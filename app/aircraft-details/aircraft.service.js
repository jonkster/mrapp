"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var AircraftService = /** @class */ (function () {
    function AircraftService() {
    }
    AircraftService.prototype.getEngineLeft = function (ac, engine) {
        let hrs =  ac.engineHrsAtMaint[engine - 1] - this.getTtis(ac);
        return Math.round(hrs * 10) / 10;
    };
    AircraftService.prototype.getPropLeft = function (ac, engine) {
        let hrs = ac.propHrsAtMaint[engine - 1] - this.getTtis(ac);
        return Math.round(hrs * 10) / 10;
    };
    AircraftService.prototype.getHrsLeft = function (ac) {
        var hrs = ac.hrsAtMaint - this.getTtis(ac);
        return Math.round(hrs * 10) / 10;
    };
    AircraftService.prototype.getDaysLeft = function (ac) {
        if (ac.annualDateTuple !== undefined) {
            var exDate = new Date(ac.annualDateTuple[0], ac.annualDateTuple[1] - 1, ac.annualDateTuple[2]);
            var time = exDate.valueOf() - Date.now().valueOf();
            return Math.round(time / (24 * 60 * 60 * 1000));
        }
        else {
            return 0;
        }
    };
    AircraftService.prototype.getMaintDaysLeft = function (dateTuple) {
        if (dateTuple !== undefined) {
            var exDate = new Date(dateTuple[0], dateTuple[1] - 1, dateTuple[2]);
            var time = exDate.valueOf() - Date.now().valueOf();
            return Math.round(time / (24 * 60 * 60 * 1000));
        }
        else {
            return 0;
        }
    };
    AircraftService.prototype.getTtis = function (ac) {
        return ac.clockTime + ac.clockOffset;
    };
    AircraftService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], AircraftService);
    return AircraftService;
}());
exports.AircraftService = AircraftService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWlyY3JhZnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFpcmNyYWZ0LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMkM7QUFJM0M7SUFFRTtJQUFnQixDQUFDO0lBRWhCLHVDQUFhLEdBQWIsVUFBYyxFQUFZLEVBQUUsTUFBYztRQUNyQyxNQUFNLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRixxQ0FBVyxHQUFYLFVBQVksRUFBWSxFQUFFLE1BQWM7UUFDbkMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVGLG9DQUFVLEdBQVYsVUFBVyxFQUFZO1FBQ2xCLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUMsRUFBRSxDQUFDLEdBQUUsRUFBRSxDQUFBO0lBQ2pDLENBQUM7SUFFRixxQ0FBVyxHQUFYLFVBQVksRUFBWTtRQUNoQixFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsZUFBZSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0YsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEdBQUMsRUFBRSxHQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDakIsQ0FBQztJQUNULENBQUM7SUFFRCwwQ0FBZ0IsR0FBaEIsVUFBaUIsU0FBbUI7UUFDNUIsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEUsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEdBQUMsRUFBRSxHQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDakIsQ0FBQztJQUNULENBQUM7SUFFRixpQ0FBTyxHQUFQLFVBQVEsRUFBWTtRQUNkLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUM7SUFDM0MsQ0FBQztJQXZDVSxlQUFlO1FBRDNCLGlCQUFVLEVBQUU7O09BQ0EsZUFBZSxDQXlDM0I7SUFBRCxzQkFBQztDQUFBLEFBekNELElBeUNDO0FBekNZLDBDQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWlyY3JhZnQgfSBmcm9tIFwiLi4vZmxlZXQvYWlyY3JhZnRcIjtcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFpcmNyYWZ0U2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgZ2V0RW5naW5lTGVmdChhYzogQWlyY3JhZnQsIGVuZ2luZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGFjLmVuZ2luZUhyc0F0TWFpbnRbZW5naW5lLTFdIC0gdGhpcy5nZXRUdGlzKGFjKTtcbiAgICB9XG5cbiAgIGdldFByb3BMZWZ0KGFjOiBBaXJjcmFmdCwgZW5naW5lOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gYWMucHJvcEhyc0F0TWFpbnRbZW5naW5lLTFdIC0gdGhpcy5nZXRUdGlzKGFjKTtcbiAgICB9XG5cbiAgIGdldEhyc0xlZnQoYWM6IEFpcmNyYWZ0KTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGhycyA9IGFjLmhyc0F0TWFpbnQgLSB0aGlzLmdldFR0aXMoYWMpO1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChocnMqMTApLyAxMFxuICAgIH1cblxuICAgZ2V0RGF5c0xlZnQoYWM6IEFpcmNyYWZ0KTogbnVtYmVyIHtcbiAgICAgICAgICAgaWYgKGFjLmFubnVhbERhdGVUdXBsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgbGV0IGV4RGF0ZSA9IG5ldyBEYXRlKGFjLmFubnVhbERhdGVUdXBsZVswXSwgYWMuYW5udWFsRGF0ZVR1cGxlWzFdLTEsIGFjLmFubnVhbERhdGVUdXBsZVsyXSk7XG4gICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBleERhdGUudmFsdWVPZigpIC0gRGF0ZS5ub3coKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGltZSAvICgyNCo2MCo2MCoxMDAwKSk7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgIH1cbiAgIH1cblxuICAgZ2V0TWFpbnREYXlzTGVmdChkYXRlVHVwbGU6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICAgICAgICAgaWYgKGRhdGVUdXBsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgbGV0IGV4RGF0ZSA9IG5ldyBEYXRlKGRhdGVUdXBsZVswXSwgZGF0ZVR1cGxlWzFdLTEsIGRhdGVUdXBsZVsyXSk7XG4gICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBleERhdGUudmFsdWVPZigpIC0gRGF0ZS5ub3coKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGltZSAvICgyNCo2MCo2MCoxMDAwKSk7XG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgIH1cbiAgIH1cblxuICBnZXRUdGlzKGFjOiBBaXJjcmFmdCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBhYy5jbG9ja1RpbWUgKyBhYy5jbG9ja09mZnNldDtcbiAgfVxuXG59XG4iXX0=
