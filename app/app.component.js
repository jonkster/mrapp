"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
/*import * as permissions from "nativescript-permissions";
import * as TNSPhone from 'nativescript-phone';*/
var email = require("nativescript-email");
var fleet_service_1 = require("./common/fleet.service");
var sprintf_js_1 = require("./node_modules/sprintf-js");
var fs = require("file-system");
var AppComponent = /** @class */ (function () {
    function AppComponent(fleetService) {
        this.fleetService = fleetService;
        var documents = fs.knownFolders.documents();
        var path = fs.path.join(documents.path, "reportFile.html");
        var file = fs.File.fromPath(path);
        this.composeOptions = {
            to: ['jonathan.p.h.kelly@gmail.com'],
            subject: 'Curtis Aviation Maintenance Report',
            attachments: [{
                    'fileName': 'reportFile.html',
                    'path': path,
                    'mimeType': 'text/html'
                }
            ]
        };
    }
    AppComponent.prototype.createAttachment = function (hdg, msg) {
        var documents = fs.knownFolders.documents();
        var path = fs.path.join(documents.path, "reportFile.html");
        var file = fs.File.fromPath(path);
        file.writeText('<b>' + hdg + '</b><hr/><pre>' + msg + '</pre>')
            .then(function (result) {
        })
            .catch(function (err) {
            console.log(err);
        });
        return true;
    };
    AppComponent.prototype.niceDate = function (d) {
        var weekDay = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        var date = [d.getFullYear(), d.getMonth() + 1, d.getDate()];
        var time = [d.getHours(), d.getMinutes(), d.getSeconds()];
        // Determine AM or PM suffix based on the hour
        var suffix = (time[0] < 12) ? "AM" : "PM";
        // Convert hour from military time
        time[0] = (time[0] < 12) ? time[0] : time[0] - 12;
        // If hour is 0, set it to 12
        time[0] = time[0] || 12;
        // Return the formatted string
        return sprintf_js_1.sprintf("%s, %02d/%02d/%d, %02d:%02d:%02d %s", weekDay[d.getDay()], date[0], date[1], date[2], time[0], time[1], time[2], suffix);
    };
    AppComponent.prototype.notifySomeone = function (subj, hdg, attach) {
        var _this = this;
        email.available().then(function (available) {
            if (available) {
                if (_this.createAttachment(hdg, attach)) {
                    _this.composeOptions.subject = subj;
                    _this.composeOptions.body = "Please find " + hdg + " attached.";
                    email.compose(_this.composeOptions).then(function (result) {
                        if (result) {
                        }
                        else {
                        }
                    }).catch(function (error) { return console.log(error); });
                }
                else {
                    alert('could not generate email');
                }
            }
            else {
                alert('email not available');
            }
        }).catch(function (error) { return console.log(error); });
    };
    AppComponent = __decorate([
        core_1.Component({
            selector: "ns-app",
            templateUrl: "app.component.html",
        }),
        __metadata("design:paramtypes", [fleet_service_1.FleetService])
    ], AppComponent);
    return AppComponent;
}());
exports.AppComponent = AppComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMEM7QUFDMUM7aURBQ2lEO0FBQ2pELDBDQUE0QztBQUM1Qyx3REFBc0Q7QUFDdEQsd0RBQWtEO0FBQ2xELGdDQUFrQztBQVNsQztJQUlRLHNCQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUNwRCxJQUFJLFNBQVMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzVDLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUMzRCxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsY0FBYyxHQUFHO1lBQ2QsRUFBRSxFQUFFLENBQUMsOEJBQThCLENBQUM7WUFDcEMsT0FBTyxFQUFFLG9DQUFvQztZQUNsRSxXQUFXLEVBQUUsQ0FBRTtvQkFDZCxVQUFVLEVBQUUsaUJBQWlCO29CQUM3QixNQUFNLEVBQUUsSUFBSTtvQkFDWixVQUFVLEVBQUUsV0FBVztpQkFDdEI7YUFDRDtTQUNhLENBQUM7SUFDVixDQUFDO0lBRUQsdUNBQWdCLEdBQXZCLFVBQXdCLEdBQVcsRUFBRSxHQUFXO1FBQy9DLElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDNUMsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1FBQzNELElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FB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SyxDQUFDLEVBQWxCLENBQWtCLENBQUMsQ0FBQztnQkFDdkMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDcUIsS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUM7Z0JBQy9ELENBQUM7WUFDbUIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNBLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3JDLENBQUM7UUFDVCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFsQixDQUFrQixDQUFDLENBQUM7SUFDOUMsQ0FBQztJQXRFSSxZQUFZO1FBTHhCLGdCQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUsUUFBUTtZQUNsQixXQUFXLEVBQUUsb0JBQW9CO1NBQ3BDLENBQUM7eUNBTXdDLDRCQUFZO09BSnpDLFlBQVksQ0F1RXhCO0lBQUQsbUJBQUM7Q0FBQSxBQXZFRCxJQXVFQztBQXZFWSxvQ0FBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG4vKmltcG9ydCAqIGFzIHBlcm1pc3Npb25zIGZyb20gXCJuYXRpdmVzY3JpcHQtcGVybWlzc2lvbnNcIjtcbmltcG9ydCAqIGFzIFROU1Bob25lIGZyb20gJ25hdGl2ZXNjcmlwdC1waG9uZSc7Ki9cbmltcG9ydCAqIGFzIGVtYWlsIGZyb20gXCJuYXRpdmVzY3JpcHQtZW1haWxcIjtcbmltcG9ydCB7IEZsZWV0U2VydmljZSB9IGZyb20gXCIuL2NvbW1vbi9mbGVldC5zZXJ2aWNlXCI7XG5pbXBvcnQge3NwcmludGZ9IGZyb20gXCIuL25vZGVfbW9kdWxlcy9zcHJpbnRmLWpzXCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZmlsZS1zeXN0ZW1cIjtcblxuZGVjbGFyZSB2YXIgYW5kcm9pZDtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwibnMtYXBwXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiYXBwLmNvbXBvbmVudC5odG1sXCIsXG59KVxuXG5leHBvcnQgY2xhc3MgQXBwQ29tcG9uZW50IHsgXG5cbiAgICAgICAgY29tcG9zZU9wdGlvbnM6IGVtYWlsLkNvbXBvc2VPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZmxlZXRTZXJ2aWNlOiBGbGVldFNlcnZpY2UpIHtcblx0XHRsZXQgZG9jdW1lbnRzID0gZnMua25vd25Gb2xkZXJzLmRvY3VtZW50cygpO1xuXHRcdGxldCBwYXRoID0gZnMucGF0aC5qb2luKGRvY3VtZW50cy5wYXRoLCBcInJlcG9ydEZpbGUuaHRtbFwiKTtcblx0XHRsZXQgZmlsZSA9IGZzLkZpbGUuZnJvbVBhdGgocGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb3NlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBbJ2pvbmF0aGFuLnAuaC5rZWxseUBnbWFpbC5jb20nXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Q6ICdDdXJ0aXMgQXZpYXRpb24gTWFpbnRlbmFuY2UgUmVwb3J0Jyxcblx0XHRcdGF0dGFjaG1lbnRzOiBbIHtcblx0XHRcdFx0J2ZpbGVOYW1lJzogJ3JlcG9ydEZpbGUuaHRtbCcsXG5cdFx0XHRcdCdwYXRoJzogcGF0aCxcblx0XHRcdFx0J21pbWVUeXBlJzogJ3RleHQvaHRtbCdcblx0XHRcdFx0fVxuXHRcdFx0XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuXHRwdWJsaWMgY3JlYXRlQXR0YWNobWVudChoZGc6IHN0cmluZywgbXNnOiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRsZXQgZG9jdW1lbnRzID0gZnMua25vd25Gb2xkZXJzLmRvY3VtZW50cygpO1xuXHRcdGxldCBwYXRoID0gZnMucGF0aC5qb2luKGRvY3VtZW50cy5wYXRoLCBcInJlcG9ydEZpbGUuaHRtbFwiKTtcblx0XHRsZXQgZmlsZSA9IGZzLkZpbGUuZnJvbVBhdGgocGF0aCk7XG5cblx0XHRmaWxlLndyaXRlVGV4dCgnPGI+JyArIGhkZyArICc8L2I+PGhyLz48cHJlPicgKyBtc2cgKyAnPC9wcmU+Jylcblx0XHQudGhlbihyZXN1bHQgPT4ge1xuXHQgICAgICAgXHR9KVxuXHRcdC5jYXRjaChlcnIgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyBuaWNlRGF0ZShkOiBEYXRlKTogc3RyaW5nIHtcblx0XHRsZXQgd2Vla0RheSA9IFsgJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcgXTtcblx0XHRsZXQgZGF0ZSA9IFsgZC5nZXRGdWxsWWVhcigpLCAgZC5nZXRNb250aCgpICsgMSwgZC5nZXREYXRlKCkgXTtcblx0XHRsZXQgdGltZSA9IFsgZC5nZXRIb3VycygpLCBkLmdldE1pbnV0ZXMoKSwgZC5nZXRTZWNvbmRzKCkgXTtcblxuXHRcdC8vIERldGVybWluZSBBTSBvciBQTSBzdWZmaXggYmFzZWQgb24gdGhlIGhvdXJcblx0XHRsZXQgc3VmZml4ID0gKCB0aW1lWzBdIDwgMTIgKSA/IFwiQU1cIiA6IFwiUE1cIjtcblxuXHRcdC8vIENvbnZlcnQgaG91ciBmcm9tIG1pbGl0YXJ5IHRpbWVcblx0XHR0aW1lWzBdID0gKCB0aW1lWzBdIDwgMTIgKSA/IHRpbWVbMF0gOiB0aW1lWzBdIC0gMTI7XG5cblx0XHQvLyBJZiBob3VyIGlzIDAsIHNldCBpdCB0byAxMlxuXHRcdHRpbWVbMF0gPSB0aW1lWzBdIHx8IDEyO1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBmb3JtYXR0ZWQgc3RyaW5nXG5cdFx0cmV0dXJuIHNwcmludGYoXCIlcywgJTAyZC8lMDJkLyVkLCAlMDJkOiUwMmQ6JTAyZCAlc1wiLCB3ZWVrRGF5W2QuZ2V0RGF5KCldLCBkYXRlWzBdLCBkYXRlWzFdLCBkYXRlWzJdLCB0aW1lWzBdLCB0aW1lWzFdLCB0aW1lWzJdLCBzdWZmaXgpO1xuXHR9XG5cbiAgICAgICAgcHVibGljIG5vdGlmeVNvbWVvbmUoc3Viajogc3RyaW5nLCBoZGc6IHN0cmluZywgYXR0YWNoOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBlbWFpbC5hdmFpbGFibGUoKS50aGVuKGF2YWlsYWJsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlKSB7XG5cdFx0XHRcdGlmICh0aGlzLmNyZWF0ZUF0dGFjaG1lbnQoaGRnLCBhdHRhY2gpKSB7XG5cdFx0XHRcdFx0dGhpcy5jb21wb3NlT3B0aW9ucy5zdWJqZWN0ID0gc3Viajtcblx0XHRcdFx0XHR0aGlzLmNvbXBvc2VPcHRpb25zLmJvZHkgPSBcIlBsZWFzZSBmaW5kIFwiICsgaGRnICsgXCIgYXR0YWNoZWQuXCI7XG5cdFx0XHRcdFx0ZW1haWwuY29tcG9zZSh0aGlzLmNvbXBvc2VPcHRpb25zKS50aGVuKHJlc3VsdCA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0YWxlcnQoJ2NvdWxkIG5vdCBnZW5lcmF0ZSBlbWFpbCcpO1xuXHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnZW1haWwgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG4gICAgICAgIH1cbn1cbiJdfQ==